<div class="row page-titles">
    <div class="col-md-6 col-sm-12 align-self-center">
        <h4 class="mb-1 text-muted"> <i><img src="assets/img/computer.png" /></i> Manage Categories</h4>

    </div>
    <div class="col-md-6 col-sm-12 align-self-center">

        <!-- <div class="col-md-8 col-sm-6 col-xs-6 col-6 text-right"><label class="mt-2"></label></div> -->
        <div class="float-right">
            <a href="#" class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal"> Add Category</a>
        </div>

    </div>
</div>


<!-- The Modal Add Category-->
<form [formGroup]="validatingFormModel">
    <div class="modal fade" id="myModal">
        <div class="modal-dialog ">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4>Add Category</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form-group">
                        <label> New Category</label>
                        <input type="text" class="form-control" formControlName="newcategoryname"
                            [(ngModel)]="addCategoryData.category_name" placeholder="New Category" />
                        <div class="colorred"
                            *ngIf="validatingFormModel.get('newcategoryname').hasError('required') && validatingFormModel.get('newcategoryname').touched">
                            Category name required.</div>
                    </div>

                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button class="btn btn-success" (click)="AddCategory()">Add</button>
                </div>

            </div>
        </div>
    </div>
</form>



<!-- The Modal Update Category-->
<form [formGroup]="validatingForm">
    <div class="modal fade" id="myModal2">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h2>Update Category Name</h2>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form-group">
                        <label>Old Category Name</label>
                        <input type="text" [(ngModel)]="category.categoryname" formControlName="categoryname"
                            class="form-control" disabled />
                    </div>

                    <div class="form-group">
                        <label>New Category Name</label>
                        <input type="text" [(ngModel)]="category.newcategoryname" formControlName="newcategoryname"
                            class="form-control" />
                        <div class="colorred"
                            *ngIf="validatingForm.get('newcategoryname').hasError('required') && validatingForm.get('newcategoryname').touched">
                            Category name required.</div>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button class="btn btn-success" (click)="UpdateCategory()">Update</button>
                </div>

            </div>
        </div>
    </div>
</form>


<div class="row">
    <div class="col-md-12 mb-4 align-items-stretch">
        <div class="card border-0 rounded-0 h-100">
            <div class="card-body">
                <div class="table-responsive" id="Department_Master">
                    <table id="dept_details" class="table table-striped table-bordered" cellspacing="0" width="100%">

                        <thead class="table-success">
                            <tr>
                                <th scope="col">S.No</th>
                                <th scope="col">Category Name</th>
                                <th scope="col">Edit </th>
                                <th scope="col">Delete </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let category of categorydetail ; let i=index">
                                <td>{{i+1}}</td>
                                <td>{{category.category_name}} </td>
                                <td><button class="btn-success1" (click)="edit(category.id, category.category_name)" data-toggle="modal"
                                        data-target="#myModal2">Edit</button></td>
                                <td><button class="btn-danger1"
                                        (click)="delete(category.id, category.category_name)">Delete</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="loaderwrapper" *ngIf="showLoader">
    <div class="loader">
   
    </div>
    <br/>
    <p id="loadertext">
      <label>Loading please wait...</label>
  </p>
  </div>